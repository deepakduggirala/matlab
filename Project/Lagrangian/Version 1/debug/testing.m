s=sym('s');
c = sym('c');

s2 = sym('s2');
c2 = sym('c2');
m=sym('m');
l = sym('l');
k=sym('k');
s12 = sym('s12');
c12 = sym('c12');

R1 = [c -s 0 0;s c 0 0;0 0 0 0;0 0 0 0];
R1t = [c s 0 0;-s c 0 0;0 0 0 0;0 0 0 0];
J1 = [k 0 0 m*l/2;0 0 0 0;0 0 0 0;m*l/2 0 0 m];

J1new = R1*J1*R1t

r = [l/2 ;0 ;0 ;0];
U11 = [-s -c 0 0;c -s 0 0;0 0 0 0;0 0 0 0;];
U111 = [-c s 0 0;-s -c 0 0;0 0 0 0;0 0 0 0];
U11t = [-s c 0 0;-c -s 0 0;0 0 0 0;0 0 0 0];
g=sym('g');
G = [0 -g 0 0];

R1d = [-s -c 0 0;c -s 0 0;0 0 0 0;0 0 0 0];
R2 = [c2 -s2 0 0;s2 c2 0 0;0 0 0 0;0 0 0 0];
U21 = R1d*R2;
U21t = [-s12, c12,0 ,0;-c12, -s12, 0, 0;0 0 0 0;0 0 0 0];
R2d = [-s2, -c2, 0, 0;c2, -s2, 0, 0;0 0 0 0;0 0 0 0];
U22 = R1*R2d;
U22t = [-s12, c12, 0 0; -c12, - s12, 0 ,0;0 0 0 0;0 0 0 0;];

D11 = trace(U11*J1new*U11t + U21*J1new*U21t)
D12 = trace(U22*J1new*U21t)
D22 = trace(U22*J1new*U22t)
H = trace(U111*J1new*U11t);

C = -m*(G*(U11*(r)));